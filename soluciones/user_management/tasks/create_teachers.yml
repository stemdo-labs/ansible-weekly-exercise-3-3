- name: Crear cuentas de profesor y darles permisos de sudo
  hosts: profesor
  become: true
  tasks:
    - name: Crear cuentas de profesor
      user:
        name: "{{ teacher_name }}"
        password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          35373035623531373862396463623138383766386662613965623130316530653830633263653431
          3733656230393733363233346237343864356436653330660a323566373635666661343439373166
          66306163393263343938343166333365653038323864356239623331356535653338346562653865
          6364313030663261350a643834343664666435386135366430643762663839316161303836316137
          39376663613536633431303131386634333737313463366236616262326637306334
        groups: profesores
        state: present

    - name: Dar permisos de superusuario al profesor
      lineinfile:
        dest: /etc/sudoers
        state: present
        line: "{{ teacher_name }} ALL=(ALL) NOPASSWD: ALL"
        validate: 'visudo -cf %s'

